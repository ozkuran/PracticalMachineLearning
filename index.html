<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Practicalmachinelearning : Practical Machine Learning Repository">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Practicalmachinelearning</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ozkuran/PracticalMachineLearning">View on GitHub</a>

          <h1 id="project_title">Practicalmachinelearning</h1>
          <h2 id="project_tagline">Practical Machine Learning Repository</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ozkuran/PracticalMachineLearning/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ozkuran/PracticalMachineLearning/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <hr>

<p>title: "Practical Machine Learning Writeup"
author: "Mahmut Ali Ã–ZKURAN"
date: "Sunday, February 22, 2015"</p>

<h2>
<a id="output-html_document" class="anchor" href="#output-html_document" aria-hidden="true"><span class="octicon octicon-link"></span></a>output: html_document</h2>

<h3>
<a id="purpose" class="anchor" href="#purpose" aria-hidden="true"><span class="octicon octicon-link"></span></a>Purpose</h3>

<div class="highlight highlight-r"><pre>library(<span class="pl-vo">caret</span>)</pre></div>

<p>The purpose of this project is using given Activity Monitor data to create a machine learning algorith to help us predict the future actions of the given data. </p>

<h3>
<a id="loading-data" class="anchor" href="#loading-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Loading Data</h3>

<div class="highlight highlight-r"><pre><span class="pl-vo">trainingData</span> <span class="pl-k">&lt;-</span> read.csv(<span class="pl-s1"><span class="pl-pds">"</span>pml-training.csv<span class="pl-pds">"</span></span>, <span class="pl-v">na.strings</span> <span class="pl-k">=</span> c(<span class="pl-s1"><span class="pl-pds">"</span>NA<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>))
<span class="pl-vo">testingData</span> <span class="pl-k">&lt;-</span> read.csv(<span class="pl-s1"><span class="pl-pds">"</span>pml-testing.csv<span class="pl-pds">"</span></span>, <span class="pl-v">na.strings</span> <span class="pl-k">=</span> c(<span class="pl-s1"><span class="pl-pds">"</span>NA<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>))</pre></div>

<h3>
<a id="cleaning-data" class="anchor" href="#cleaning-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cleaning Data</h3>

<p>There is many variables with "NA" value, for better training and faster processing remove "NA" values from data. Also removed unwanted/values could cause wrong learning (like username) from data. </p>

<div class="highlight highlight-r"><pre><span class="pl-vo">naList</span> <span class="pl-k">&lt;-</span> apply(<span class="pl-vo">trainingData</span>, <span class="pl-c1">2</span>, <span class="pl-k">function</span>(<span class="pl-vo">x</span>) { sum(is.na(<span class="pl-vo">x</span>)) })
<span class="pl-vo">trainingData</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">trainingData</span>[, which(<span class="pl-vo">naList</span> <span class="pl-k">==</span> <span class="pl-c1">0</span>)]
<span class="pl-vo">testingData</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">testingData</span>[, which(<span class="pl-vo">naList</span> <span class="pl-k">==</span> <span class="pl-c1">0</span>)]

<span class="pl-vo">trainingData</span> <span class="pl-k">&lt;-</span> subset(<span class="pl-vo">trainingData</span>, <span class="pl-v">select</span><span class="pl-k">=</span><span class="pl-k">-</span>c(<span class="pl-vo">X</span>, <span class="pl-vo">user_name</span>, <span class="pl-vo">raw_timestamp_part_1</span>, <span class="pl-vo">raw_timestamp_part_2</span>, <span class="pl-vo">cvtd_timestamp</span>, <span class="pl-vo">new_window</span>, <span class="pl-vo">num_window</span>))
<span class="pl-vo">testingData</span> <span class="pl-k">&lt;-</span> subset(<span class="pl-vo">testingData</span>, <span class="pl-v">select</span><span class="pl-k">=</span><span class="pl-k">-</span>c(<span class="pl-vo">X</span>, <span class="pl-vo">user_name</span>, <span class="pl-vo">raw_timestamp_part_1</span>, <span class="pl-vo">raw_timestamp_part_2</span>, <span class="pl-vo">cvtd_timestamp</span>, <span class="pl-vo">new_window</span>, <span class="pl-vo">num_window</span>))
</pre></div>

<h3>
<a id="preparing-training-data" class="anchor" href="#preparing-training-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preparing Training Data</h3>

<h4>
<a id="cross-validation" class="anchor" href="#cross-validation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cross Validation</h4>

<p>Training data splitting by %60 to %40 for cross validation. </p>

<div class="highlight highlight-r"><pre><span class="pl-c">#training &lt;- createDataPartition(trainingData$classe, p=.60, list=FALSE)</span>
<span class="pl-c">#train &lt;- training[trainingData[,1]]</span>
<span class="pl-c">#test &lt;- training[-trainingData[,1]]</span></pre></div>

<h3>
<a id="training" class="anchor" href="#training" aria-hidden="true"><span class="octicon octicon-link"></span></a>Training</h3>

<p>Random forest model used for training.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">trainFit</span> <span class="pl-k">&lt;-</span> train(<span class="pl-vo">classe</span> <span class="pl-k">~</span> ., <span class="pl-v">method</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>rf<span class="pl-pds">"</span></span>, <span class="pl-v">data</span> <span class="pl-k">=</span> <span class="pl-vo">trainingData</span>, <span class="pl-v">importance</span> <span class="pl-k">=</span> <span class="pl-c1">T</span>, <span class="pl-v">trControl</span> <span class="pl-k">=</span> trainControl(<span class="pl-v">method</span> <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>cv<span class="pl-pds">"</span></span>, <span class="pl-v">number</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>))
<span class="pl-vo">trainFit</span>
plot(<span class="pl-vo">trainFit</span>, <span class="pl-v">ylim</span> <span class="pl-k">=</span> c(<span class="pl-c1">0.9</span>, <span class="pl-c1">1</span>))


<span class="pl-vo">important</span> <span class="pl-k">&lt;-</span> varImp(<span class="pl-vo">trainFit</span>)<span class="pl-k">$</span><span class="pl-vo">importance</span>
<span class="pl-vo">important</span><span class="pl-k">$</span><span class="pl-vo">max</span> <span class="pl-k">&lt;-</span> apply(<span class="pl-vo">important</span>, <span class="pl-c1">1</span>, <span class="pl-vo">max</span>)
<span class="pl-vo">important</span> <span class="pl-k">&lt;-</span> <span class="pl-vo">important</span>[order(<span class="pl-vo">important</span><span class="pl-k">$</span><span class="pl-vo">max</span>, <span class="pl-v">decreasing</span> <span class="pl-k">=</span> <span class="pl-c1">T</span>), ]</pre></div>

<p>Result of predicted more than %99 estimates will be true by cross-validation.</p>

<h3>
<a id="prediction-and-output" class="anchor" href="#prediction-and-output" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prediction and Output</h3>

<p>used Training on Testing Data.</p>

<div class="highlight highlight-r"><pre><span class="pl-vo">prediciton</span> <span class="pl-k">&lt;-</span> as.character(predict(<span class="pl-vo">trainFit</span>, <span class="pl-vo">testingData</span>))</pre></div>

<p>Writing answer data as given in Submisson instructions.</p>

<div class="highlight highlight-r"><pre><span class="pl-v">pml_write_files</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-vo">x</span>){
  <span class="pl-v">n</span> <span class="pl-k">=</span> length(<span class="pl-vo">x</span>)
  <span class="pl-k">for</span>(<span class="pl-vo">i</span> <span class="pl-k">in</span> <span class="pl-c1">1</span><span class="pl-k">:</span><span class="pl-vo">n</span>){
    <span class="pl-v">filename</span> <span class="pl-k">=</span> paste0(<span class="pl-vo">i</span>,<span class="pl-s1"><span class="pl-pds">"</span>.txt<span class="pl-pds">"</span></span>)
    write.table(<span class="pl-vo">x</span>[<span class="pl-vo">i</span>],<span class="pl-v">file</span><span class="pl-k">=</span><span class="pl-vo">filename</span>,<span class="pl-v">quote</span><span class="pl-k">=</span><span class="pl-c1">FALSE</span>,<span class="pl-v">row.names</span><span class="pl-k">=</span><span class="pl-c1">FALSE</span>,<span class="pl-v">col.names</span><span class="pl-k">=</span><span class="pl-c1">FALSE</span>)
  }
}

<span class="pl-v">answers</span> <span class="pl-k">=</span> c(<span class="pl-k">***</span>)

pml_write_files(<span class="pl-vo">answers</span>)</pre></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Practicalmachinelearning maintained by <a href="https://github.com/ozkuran">ozkuran</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
